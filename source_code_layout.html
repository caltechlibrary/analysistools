<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>analysistools</title>
    <link rel="stylesheet" href="https://caltechlibrary.github.io/css/site.css">
    <link rel="stylesheet" href="https://media.library.caltech.edu/cl-webcomponents/css/code-blocks.css">
    <script type="module" src="https://media.library.caltech.edu/cl-webcomponents/copyToClipboard.js"></script>
    <script type="module" src="https://media.library.caltech.edu/cl-webcomponents/footer-global.js"></script>
</head>
<body>
<header>
<a href="https://library.caltech.edu"><img src="https://media.library.caltech.edu/assets/caltechlibrary-logo.png" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
    <li><a href="/">Home</a></li>
    <li><a href="index.html">README</a></li>
    <li><a href="LICENSE">LICENSE</a></li>
    <li><a href="INSTALL.html">INSTALL</a></li>
    <li><a href="user_manual.html">User Manual</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="search.html">Search</a></li>
    <li><a href="https://github.com/caltechlibrary/analysistools">GitHub</a></li>
</ul>
</nav>
<section>
<h1 id="source-code-layout">Source Code Layout</h1>
<p>The source code originated from porting a Python proof of concept to
Go. The primary result is a single command line tool (at present) called
<strong>phrasecheck</strong>. It can produce CSV output for four
different analysis.</p>
<dl>
<dt>mimetypes</dt>
<dd>
least files in a directory reporting on filename and possible mime type
</dd>
<dt>filetypes</dt>
<dd>
walk a directory and list the file extensions found along a count.
</dd>
</dl>
<p>check ; check files against a pattern list and report occurrences
where the pattern was found</p>
<dl>
<dt>check-directory</dt>
<dd>
walk a directory and check each file against a pattern list. Only works
for UTF-8 text files.
</dd>
</dl>
<p>The two reports, mimetypes and filetypes are drive by the directory
walk functin in <a href="filetypes.go">filetypes.go</a>. This file also
includes a hard coded Mime Type map from extension to mime type. If the
extension is not in the list the “application/octet-stream” is
returned.</p>
<p>The check and check-directory reports are defined primarily in <a
href="tokenizer.go">phrasecheck.go</a>. This file also includes the
support for the command line tool (i.e. “Run()” function). The check
function rely on a stream of tokens. Each token has a value, work number
and line number. The check function in phrasecheck.go use the token list
for comaparison and reporting.</p>
<p>The <a href="tokenizer.go">tokenizer.go</a> file contains the
tokenizer functions as well as defining the struct of the tokens
returned. The allows you to read a file once, get a single token list
and perform multiple analysis on the token list without needing to
reread it from disk for each analysis. The token list will need to fit
in memory so for extremely large files this may fail.</p>
<p>The <a href="version.go">version.go</a> is generated by CMTools. It
holds the version, license and release information for the program or
other projects that use the analysistools module.</p>
<dl>
<dt><a href="helptext.go">helptext.go</a></dt>
<dd>
This is the file that holds all the helptext in the application. That
output of the help content is used by the Makefile to generate man pages
via Pandoc.
</dd>
</dl>
<p>The files ending in “_test.go” are test files used by
<code>go test</code> command.</p>
<h2 id="standard-development-files">Standard development files</h2>
<dl>
<dt>codemeta.json</dt>
<dd>
This is the primary repository metadata file. It is used by CMTools to
generate everything from the version.go to various bits of
documentation.
</dd>
<dt>CITATION.cff</dt>
<dd>
This is generated from the codemeta.json by CMTools
</dd>
<dt>README.md</dt>
<dd>
This stardard README for the project. This can be generated by CMTools
using the codemeta.json but usually is managed by hand after intial
creation.
</dd>
<dt>about.md</dt>
<dd>
This is an about page generate from the codemeta.json file by CMTools
</dd>
<dt>user_manual.md</dt>
<dd>
This file is a directory of repository documentation. It should have a
least the main page linked in.
</dd>
<dt>Makefile</dt>
<dd>
GNU Makefile to building the project and installing locally on your
development machine. The Makefile is largely generated by CMTools based
on the contents of codemeta.json.
</dd>
<dt>website.mak</dt>
<dd>
This is a Makefile for generating the web documentation.
</dd>
<dt>INSTALL.md, INSTALL_NOTES_macOS.md, INSTALL_NOTES_Windows.md</dt>
<dd>
This is the CMTools generated install documentation based on
codemeta.json
</dd>
<dt>search.md</dt>
<dd>
This is a PageFind search page used to search the document in this
repository on the repository’s public website.
</dd>
<dt>publish.bash, publish.ps1</dt>
<dd>
This publishes the web docs to gh-pages branch and pushes to GitHub.
This is generated by CMTools
</dd>
<dt>release.bash, release.ps1</dt>
<dd>
This uses GitHub <code>gh</code> utility to make a release. This is run
after <code>make release</code> completes. These scripts are generated
by CMTools
</dd>
<dt>TODO.md</dt>
<dd>
This is a hand curated list of action items I use as reference.
</dd>
<dt>installer.sh, installer.ps1</dt>
<dd>
These are Bash and Powershell scripts used to install phrasecheck and
man pages from the project website using curl or the Windows
equivallents. They are generated by CMTools. See [INSTALL.md] for
details.
</dd>
<dt>links-to-html.lua</dt>
<dd>
This is a Lua script used by Pandoc when building the website. It is
referenced in the website.mak makefile.
</dd>
<dt>page.tmpl</dt>
<dd>
This is a Pandoc template for building the web docs. It is used by
Pandoc in the website.mak. It is generated by CMTools.
</dd>
</dl>
</section>
<footer-global></footer-global>
</body>
</html>